<div id="textarea-monitor" class="microlight" spellcheck="false"></div>

<script>
	const monitor = document.getElementById("textarea-monitor");

	async function fetch_top() {
		if(document.getElementById("monitor-div").style.display != "none") {
			const date = new Date().getTime().toString();
			const formData = new FormData();
			formData.append("date", date);
		
			let response = await fetch("/api/top", {
				method: "POST",
				headers: {
					//"content-type": "application/json"
					"signature": signature(date)
			    },
				body: formData
			});
			let result = await response.json();

			//monitor.innerHTML = result["output"];
			monitor.innerHTML = hljs.highlightAuto(result["output"]).value;

			setTimeout(function(){fetch_top()}, 3000);
		}
	}
</script>

<style>
	#textarea-monitor {
		background: var(--secondary-dark);
		border: 1px solid var(--light-black);
		color: var(--white);
		height: calc(100vh - 8em); 
		width: 100%;
		font-family: "ubuntu mono";
		font-size: 0.9em;
		overflow-x:auto;
		padding: 0.25em 0.25em;
		margin: 0.25em 0.5em;
		resize: none;
		text-align: left;
		white-space: pre-wrap;
	}
</style>